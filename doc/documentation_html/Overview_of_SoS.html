<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>Overview_of_SoS</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<link rel="stylesheet" href="../../assets/css/bootstrap.min.css">
<link rel="stylesheet" href="../../assets/css/pygmentsSoS.css">



<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Overview-of-SoS-concepts">Overview of SoS concepts<a class="anchor-link" href="#Overview-of-SoS-concepts">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A SoS <strong>script</strong> defines one or more <strong>workflows</strong>, and each workflow consists of one or more <strong>steps</strong>.</p>
<p><img src="/media/workflow.png" alt="workflow"></p>
<p>Although the input and output can be more general, each step typically has its <strong>input</strong>, <strong>output</strong>, and <strong>dependents</strong> files, it executes a <strong>step process</strong> that consists of one or more Python statements and SoS actions (special python functions). Part or all the step process, called <strong>tasks</strong>, can be executed and monitored externally.</p>
<p><img src="media/sos_step.png" alt="sos_step"></p>
<p>A SoS script contains <strong>comments</strong>, <strong>statements</strong>, and one or more SoS <strong>steps</strong>. A SoS <strong>step</strong> consists of a <strong>header</strong>
with one or more step names and optional options. The body of a SoS step consists of optional <strong>comments</strong>, 
<strong>statements</strong>, <strong>input</strong>, <strong>output</strong>, <strong>depends</strong> files, <strong>parameter</strong> definitions, followed by step <strong>process</strong>. The following figure 
shows a sample script that defines a workflow with two steps:</p>
<p><img src="media/sample_script.jpg" alt="sample_script"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Formal-definitions-of-terminology-&amp;-grammar">Formal definitions of terminology &amp; grammar<a class="anchor-link" href="#Formal-definitions-of-terminology-&amp;-grammar">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><strong>Script</strong>: A SoS script that defines one or more workflows.</li>
<li><strong>Workflow</strong>: A sequence of processes that can be executed to complete certain task.</li>
<li><strong>Step</strong>: A step of a workflow that perform one piece of the workflow.</li>
<li><strong>Target</strong>: Objects that are input and result of a SoS step, which are usually files, but can also be objects such as an executable command (with variable locations), and a SoS variable.</li>
<li><strong>Step options</strong>: Options of the step that assist the definition of the workflow.</li>
<li><strong>Step input</strong>: Specifies the input files of the step.</li>
<li><strong>Step output</strong>: Specifies the output files and targets of the step.</li>
<li><strong>Step dependencies</strong>: Specifies the files and targets that are required by the step.</li>
<li><strong>Step process</strong>: The process that a step executes to complete specified work, specified as one or more Python statements. </li>
<li><strong>Task</strong>: Part or all step process that will be executed and monitored outside of SoS. These are usually resource intensive jobs that will take long time to complete.</li>
<li><strong>Action</strong>: SoS or user-defined Python functions. They differ from regular Python functions in that they may behave differently in different running mode of SoS (e.g. ignore when executed in dryrun mode).</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>More formally defined, the SoS syntax obeys the following grammar, given in extended Backus-Naur form (EBNF):</p>
<div class="highlight"><pre><span></span><span class="n">Script</span>         <span class="o">=</span> <span class="p">{</span><span class="n">comment</span><span class="p">},</span> <span class="p">{</span><span class="n">statement</span><span class="p">},</span> <span class="p">{</span><span class="n">step</span><span class="p">};</span>
<span class="n">comment</span>        <span class="o">=</span> <span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">NEWLINE</span>
<span class="n">assignment</span>     <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">NEWLINE</span>
</pre></div>
<p>with SoS steps defined as</p>
<div class="highlight"><pre><span></span><span class="n">step</span>           <span class="o">=</span> <span class="n">step_header</span><span class="p">,</span>
                 <span class="p">{</span><span class="n">comment</span><span class="p">},</span> <span class="p">{{</span><span class="n">statement</span><span class="p">},</span> <span class="p">[</span><span class="nb">input</span> <span class="o">|</span> <span class="n">output</span> <span class="o">|</span> <span class="n">depends</span> <span class="p">]},</span>
                 <span class="p">[</span><span class="n">process</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">,</span> <span class="p">{</span><span class="n">script</span><span class="p">}</span> <span class="p">]</span>
<span class="n">step_header</span>    <span class="o">=</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="n">section_names</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">names</span> <span class="o">|</span> <span class="n">options</span><span class="p">],</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="n">NEWLINE</span>
<span class="n">parameter</span>      <span class="o">=</span> <span class="s2">&quot;parameter&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">assignment</span>
<span class="nb">input</span>          <span class="o">=</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">expressions</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">],</span> <span class="n">NEWLINE</span>
<span class="n">output</span>         <span class="o">=</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">expressions</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">],</span> <span class="n">NEWLINE</span>
<span class="n">depends</span>        <span class="o">=</span> <span class="s2">&quot;depends&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">expressions</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">],</span> <span class="n">NEWLINE</span>
<span class="n">task</span>           <span class="o">=</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span>  <span class="p">[</span><span class="n">options</span><span class="p">]</span>
<span class="n">action</span>         <span class="o">=</span> <span class="n">func_format</span> <span class="o">|</span> <span class="n">script_format</span>
<span class="n">func_format</span>    <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">options</span><span class="p">],</span> <span class="s2">&quot;)&quot;</span>
<span class="n">script_format</span>  <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">options</span><span class="p">],</span> <span class="n">NEWLINE</span><span class="p">,</span> <span class="n">script</span> 
<span class="n">section_names</span>  <span class="o">=</span> <span class="n">section_name</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">section_name</span>
<span class="n">section_name</span>   <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span>
<span class="n">names</span>          <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">}</span>
<span class="n">workflow</span>       <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">steps</span><span class="p">],</span> <span class="p">{</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">steps</span><span class="p">}</span>
<span class="n">assignment</span>     <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">NEWLINW</span>
<span class="n">expressions</span>    <span class="o">=</span> <span class="n">expression</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">expression</span><span class="p">}</span>
<span class="n">options</span>        <span class="o">=</span> <span class="n">option</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;,&quot;</span> <span class="n">option</span><span class="p">}</span>
<span class="n">option</span>         <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">expression</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here <code>name</code>, <code>expression</code> and <code>statement</code> are arbitrary <a href="http://www.python.org">Python</a> names, expression and statements with added SoS features. <strong>SoS requires Python 3 and does not support Python 2.x specific syntax</strong></p>
<p>This documentation is a comprehensive reference to all SoS features. Please refer to this <a href="https://github.com/BoPeng/SOS/wiki/1.-Quick-Start">SoS quick start tutorial</a> to learn some basics of SoS before diving into the details.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span>
</pre></div>

</div>
</div>
</div>

</div>
    </div>
  </div>
</body>
</html>
